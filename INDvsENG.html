<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="referrer" content="no-referrer" />
  <title>IND vs ENG Test Live</title>
  <link rel="shortcut icon" href="logo.png" type="image/x-icon" />
  <style>
    body {
      background: #101820;
      color: white;
      text-align: center;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-bottom: 20px;
    }
    select {
      font-size: 16px;
      padding: 10px;
    }
    .player-container {
      position: relative;
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
    }
    iframe {
      width: 100%;
      aspect-ratio: 16 / 9;
      border: 2px solid #ccc;
      border-radius: 10px;
    }
    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 8px;
      z-index: 10;
      display: none;
    }
    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid #f3f3f3;
      border-top: 5px solid #3498db;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<script>(function(d,z,s){s.src='https://'+d+'/401/'+z;try{(document.body||document.documentElement).appendChild(s)}catch(e){}})('groleegni.net',9187666,document.createElement('script'))</script>
<script>(function(s,u,z,p){s.src=u,s.setAttribute('data-zone',z),p.appendChild(s);})(document.createElement('script'),'https://shebudriftaiter.net/tag.min.js',9187662,document.body||document.documentElement)</script>
<script>(function(d,z,s){s.src='https://'+d+'/401/'+z;try{(document.body||document.documentElement).appendChild(s)}catch(e){}})('gizokraijaw.net',9204347,document.createElement('script'))</script>

<body>
  <h1>IND vs ENG Test - Live Stream</h1>

  <div class="controls">
    <label>
      Language:
      <select id="language">
        <option value="hindi" selected>Hindi</option>
        <option value="english">English</option>
      </select>
    </label>

    <label>
      Quality:
      <select id="quality">
        <option value="108">144p</option>
        <option value="224">240p</option>
        <option value="412">280p</option>
        <option value="664" selected>360p</option>
        <option value="900">540p</option>
        <option value="1300">720p</option>
        <option value="3500">1080p</option>
      </select>
    </label>
  </div>

  <div class="player-container">
    <div class="loading-overlay" id="loadingOverlay">
      <div class="spinner"></div>
    </div>
    <iframe id="playerFrame" src="" allowfullscreen></iframe>
  </div>

  <script>
    const languageSelect = document.getElementById("language");
    const qualitySelect = document.getElementById("quality");
    const iframe = document.getElementById("playerFrame");
    const loadingOverlay = document.getElementById("loadingOverlay");

    const baseLinks = {
      hindi: "https://tataplay.slivcdn.com/hls/live/2020591-b/TEN3HD",
      english: "https://tataplay.slivcdn.com/hls/live/2011747-b/TEN1HD"
    };

    const token = "hdntl=exp=1750487345~acl=%2f*~id=5fc1dba3-e83d-4482-98af-d4d5546cc265~data=hdntl~hmac=258501a0d8e6e75f402d2c3fcf3e7e341a15d2e1146a872d37aef0c7047eb4cd";

    function updateIframe() {
      const lang = languageSelect.value;
      const quality = qualitySelect.value;
      const finalUrl = `${baseLinks[lang]}/${token}/master_${quality}.m3u8`;

      // Show loading indicator
      loadingOverlay.style.display = 'flex';
      
      // Set a timeout to hide the loading indicator (in case iframe fails to load)
      const loadingTimeout = setTimeout(() => {
        loadingOverlay.style.display = 'none';
      }, 10000); // Hide after 10 seconds even if not loaded

      // When iframe loads, hide the loading indicator
      iframe.onload = function() {
        clearTimeout(loadingTimeout);
        loadingOverlay.style.display = 'none';
      };

      // Embed player.html with the stream
      iframe.src = finalUrl;
    }

    // Initial load
    updateIframe();

    // Events
    languageSelect.addEventListener("change", updateIframe);
    qualitySelect.addEventListener("change", updateIframe);
  </script>
</body>
</html>